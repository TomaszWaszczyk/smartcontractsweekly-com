import React, { useState, useEffect, useRef } from 'react'
import styled, { keyframes } from 'styled-components'
import usePortal from 'react-useportal'
import { useStaticQuery, graphql, navigate } from 'gatsby'
import OutsideClickHandler from 'react-outside-click-handler'

import Heading from '@components/Heading/Heading'
import { Section } from '@components/Section/Section'
import { Img as Image } from '@components/Image/Image'

import media from '@styles/media'
import { bodyScroll } from '@utils'
import { ExIcon } from '../../icons/ui/index'

export const labsImageQuery = graphql`
  {
    labsHero: file(name: { regex: "/studiolabs-device-modal/" }) {
      childImageSharp {
        fluid(maxWidth: 1060, quality: 100) {
          ...GatsbyImageSharpFluid_noBase64
        }
      }
    }
  }
`

function AboutStudioLabs() {
  const [isOpen, setIsOpen] = useState(false)

  return (
    <>
      <Container>
        <Section narrow>
          <Blocks>
            <Block>
              <BlockInner>
                <NarativeStudioLogo />
                <p>Product design, software development and tokenizing</p>
              </BlockInner>
            </Block>
            <Block pad>
              <BlockInner>
                <NarativeLabsLogo />
                <p>Statistical models and methods for digital assets evaluation</p>
              </BlockInner>
            </Block>
            <ButtonMobile onClick={() => setIsOpen(true)}>
              Learn more
            </ButtonMobile>
          </Blocks>
          <div></div>
        </Section>
        <Button onClick={() => setIsOpen(true)}>Learn more</Button>
      </Container>
      <AboutStudioLabsModal
        isOpen={isOpen}
        setIsOpen={setIsOpen}
        handleOutsideClick={() => setIsOpen(false)}
      />
    </>
  )
}

function AboutStudioLabsModal({
  isOpen,
  setIsOpen,
  handleOutsideClick,
}: {
  isOpen: boolean
  setIsOpen: (open: boolean) => void
  handleOutsideClick: () => void
}) {
  const { Portal } = usePortal()
  const { labsHero } = useStaticQuery(labsImageQuery)
  const modalRef = useRef()

  function handleLabsLink() {
    bodyScroll('enable')
    navigate('/labs')
  }

  useEffect(() => {
    if (isOpen) {
      bodyScroll('disable', modalRef.current)

      function handleKeyDown(event: KeyboardEvent) {
        if (event.key === 'Escape') {
          setIsOpen(false)
          bodyScroll('enable')
        }
      }

      window.addEventListener('keydown', handleKeyDown, true)
      return () => window.removeEventListener('keydown', handleKeyDown, true)
    } else {
      bodyScroll('enable')
    }
  }, [isOpen, modalRef])

  const modalStyles = isOpen
    ? { opacity: 1, transition: `opacity 0s ease 0.4s` }
    : { opacity: 0, pointerEvents: 'none' }

  return (
    <>
      {isOpen && (
        <Portal>
          <Modal style={modalStyles}>
            <OutsideClickHandler onOutsideClick={handleOutsideClick}>
              <ModalContent>
                <CloseButton onClick={handleOutsideClick}>
                  <ExIcon fill="#fff" />
                </CloseButton>
                <ModalGrid>
                  <ModalAbout ref={modalRef}>
                    <ModalName>About thirdave research</ModalName>
                    <ModalRole>—</ModalRole>
                    <ModalText index={0}>
                      Alongside partnering with select companies to help design,
                      develop, and market their products, we’re also building a
                      few things of our very own. Some are open-source
                      experiments; others are full-fledged consumer products,
                      coming to market soon.
                    </ModalText>

                    <ModalText index={1}>
                      Why do things this way? To start, we just can’t help it;
                      we love to tinker. It also provides us with real revenue,
                      while allowing us to retain control of our company.
                    </ModalText>
                    <ModalText index={2}>
                      But most importantly, it continuously exposes us to new
                      technologies and ideas, heightening the quality and
                      potential of everything we create — no matter who it’s
                      for.
                    </ModalText>
                    <ModalLink onClick={handleLabsLink}>
                      See our products <InternalLinkIcon />
                    </ModalLink>
                  </ModalAbout>
                  <MediaAnimator>
                    <Image src={labsHero.childImageSharp.fluid} />
                  </MediaAnimator>
                </ModalGrid>
              </ModalContent>
            </OutsideClickHandler>
          </Modal>
        </Portal>
      )}
    </>
  )
}

export default AboutStudioLabs

const Container = styled.div`
  position: relative;
  width: 100%;
  overflow-x: hidden;
  padding-bottom: 140px;

  @media (max-width: 880px) {
    padding-bottom: 45px;
  }

  ${media.phablet`
    padding: 60px 0;
  `}
`

const Blocks = styled.div`
  position: relative;
  display: flex;

  &::before {
    content: '';
    position: absolute;
    left: 0;
    top: 15px;
    height: 1px;
    width: 200%;
    background: ${p => p.theme.colors.purple};
  }

  @media (max-width: 880px) {
    display: block;
    padding-left: 30px;

    &::before {
      content: '';
      position: absolute;
      left: 0;
      height: 95%;
      top: 5%;
      width: 1px;
    }
  }
`

const Block = styled.div<{ pad: boolean }>`
  position: relative;
  max-width: 264px;
  background: #0a0a0d;

  p {
    font-size: 22px;
    color: ${p => p.theme.colors.grey};
    margin-top: -60px;
  }

  &:first-child {
    margin-right: 20%;
  }

  ${p => p.pad && ` padding-left: 2%;`}

  ${media.desktop`
    &:first-child {
      margin-right: 10%;
    }
  `}

  @media (max-width: 880px) {
    margin-bottom: 45px;

    &:last-child {
      padding-left: 0;
    }

    ${p => p.pad && ` padding-left: 0;`}

    &::before {
      content: '';
      position: absolute;
      left: -35px;
      top: 8px;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: ${p => p.theme.colors.purple};
      box-shadow: 0 0 0 10px #090a0d;
    }

    &::after {
      content: '';
      position: absolute;
      left: -34px;
      top: 9px;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #090a0d;
    }
  }
`

const BlockInner = styled.div`
  position: relative;
  background: #0a0a0d;
  width: 100%;
`

const Button = styled.button`
  position: absolute;
  right: 10%;
  top: 6px;
  border-radius: 100px;
  border: 1px solid ${p => p.theme.colors.purple};
  color: ${p => p.theme.colors.purple};
  background: #131322;
  font-size: 12px;
  height: 20px;
  width: 120px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;

  ${media.desktop`
    right: 5%;
  `}

  @media (max-width: 880px) {
    display: none;
  }
`

const ButtonMobile = styled.button`
  display: none;
  position: relative;
  color: ${p => p.theme.colors.purple};
  font-size: 18px;
  font-weight: 700;
  text-decoration: underline;

  &::before {
    content: '';
    position: absolute;
    left: -35px;
    top: 8px;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: ${p => p.theme.colors.purple};
    box-shadow: 0 0 0 10px #090a0d;
  }

  &::after {
    content: '';
    position: absolute;
    left: -34px;
    top: 9px;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #090a0d;
  }

  @media (max-width: 880px) {
    display: block;
  }
`

const fadeInAndUp = keyframes`
  from { opacity: 0; transform: translateY(14px); }
  to { opacity: 1; transform: translateY(0); }
`

const fadeIn = keyframes`
  from { opacity: 0; }
  to { opacity: 1; }
`

const CloseButton = styled.button`
  position: absolute;
  width: 24px;
  height: 0;
  top: 30px;
  left: 30px;
  z-index: 1;

  ${media.phablet`
    position: relative;
    top: 16px;
    left: 16px;

    &::before {
      content: '';
      position: absolute;
      left: -50%;
      top: -12px;
      width: 48px;
      height: 48px;
      background: #000;
      border-radius: 50%;
      z-index: 0;
    }
  `}

  svg {
    position: relative;
  }
`

const fadeInAndUpModal = keyframes`
  from { opacity: 0; transform:  translateY(20px) scale(0.94); }
  to { opacity: 1; transform: translateY(0); }
`

const Modal = styled.div`
  display: flex;
  align-items: center;
  justify-content: center;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  padding: 0 20px;
  z-index: 10;

  backdrop-filter: blur(10px);

  & > div {
    flex: 1;
    max-width: 1100px;
    max-height: 630px;
    height: 100%;
  }

  ${media.phablet`
    padding: 15px;
    & > div {
      max-height: 92vh;
      max-height: calc(var(--vh, 1vh) * 92);
    }
  `}
`

const ModalContent = styled.div`
  position: relative;
  z-index: 3;
  display: flex;
  align-items: center;
  justify-content: center;
  max-height: 630px;
  max-width: 1140px;
  height: 100%;
  width: 100%;
  background: #000;
  border-radius: 5px;
  box-shadow: 0px 24px 48px rgba(0, 0, 0, 0.2);
  animation: ${fadeInAndUpModal} 0.4s cubic-bezier(0.165, 0.84, 0.44, 1)
    forwards;

  ${media.tablet`
    max-height: 92vh;
    max-height: calc(var(--vh, 1vh) * 92);
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  `}
`

const ModalGrid = styled.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
`

const ModalAbout = styled.div`
  max-height: 92vh;
  max-height: calc(var(--vh, 1vh) * 92);
  width: 100%;
  max-width: 480px;
  margin: 30px 0 0 25px;
  -webkit-overflow-scrolling: touch;

  ${media.desktop_small`
    max-width: initial;
    padding: 40px 80px;
    margin: 0 auto;
  `}
  
  ${media.tablet`
    padding: 30px;
    overflow: scroll;
  `}

  ${media.phablet`
    padding: 60px 20px;
  `}
`

const ModalRole = styled.div`
  font-size: 22px;
  color: ${p => p.theme.colors.grey};
  margin-bottom: 30px;
  opacity: 0;
  animation: ${fadeInAndUp} 1.15s cubic-bezier(0.165, 0.84, 0.44, 1) 300ms
    forwards;

  ${media.phablet`
    margin-bottom: 20px;
  `}
`

const ModalText = styled.p<{ index: number }>`
  color: #fff;
  margin-bottom: 25px;
  opacity: 0;
  animation: ${fadeInAndUp} 1.15s cubic-bezier(0.165, 0.84, 0.44, 1)
    ${p => p.index * 100 + 300}ms forwards;

  ${media.phablet`
    margin-bottom: 20px;
  `}
`

const ModalLink = styled.button`
  display: block;
  color: ${p => p.theme.colors.gold};
  font-size: 18px;
  font-weight: 600;
  opacity: 0;
  animation: ${fadeInAndUp} 1.15s cubic-bezier(0.165, 0.84, 0.44, 1) 500ms
    forwards;

  svg {
    margin: 0 0 4px 4px;
  }
`

const ModalName = styled(Heading.h2)`
  margin-bottom: 5px;
  opacity: 0;
  animation: ${fadeInAndUp} 1.15s cubic-bezier(0.165, 0.84, 0.44, 1) 200ms
    forwards;
`

const MediaAnimator = styled.div`
  width: 472px;
  margin-left: 35px;
  padding-left: 5%;
  flex: 1;
  opacity: 0;
  animation: ${fadeIn} 1s cubic-bezier(0.165, 0.84, 0.44, 1) 100ms forwards;

  ${media.desktop_small`
    display: none;
  `}
`

const NarativeLabsLogo = () => (
  <svg version="1.1" id="Warstwa_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
     width="350px" height="150" viewBox="40 160 880.394 198.614" enable-background="new 0 0 850.394 258.614"
     >
  <rect opacity="0" fill="none" width="350.120" height="258.614"/>
  <g>
    <g>
      <g>
        <path fill="#FFFFFF" d="M185.079,96.812c1.092,0,1.637,0.857,1.637,1.793s-0.468,1.949-1.637,1.949h-13.411v51.539
          c0,1.17-1.014,1.717-1.949,1.717c-1.014,0-1.95-0.547-1.95-1.717v-51.539h-13.566c-1.014,0-1.638-0.936-1.638-1.871
          s0.624-1.871,1.638-1.871H185.079z"/>
        <path fill="#FFFFFF" d="M221.723,126.05h-23.781v26.043c0,1.17-0.936,1.717-1.949,1.717c-0.936,0-1.949-0.547-1.949-1.717V98.448
          c0-1.17,1.014-1.637,1.949-1.637c1.014,0,1.949,0.467,1.949,1.637v24.016h23.781V98.448c0-1.17,1.014-1.637,1.95-1.637
          c1.013,0,1.949,0.467,1.949,1.637v53.645c0,1.17-0.937,1.717-1.949,1.717c-0.937,0-1.95-0.547-1.95-1.717V126.05z"/>
        <path fill="#FFFFFF" d="M237.938,98.448c0-1.17,1.014-1.637,1.949-1.637c1.014,0,1.949,0.467,1.949,1.637v53.645
          c0,1.17-0.936,1.717-1.949,1.717c-0.936,0-1.949-0.547-1.949-1.717V98.448z"/>
        <path fill="#FFFFFF" d="M254.155,98.448c0-0.857,0.624-1.637,1.715-1.637h13.334c8.811,0,16.452,3.664,16.452,15.127
          c0,9.824-5.614,13.879-12.71,14.893l12.477,24.17c0.155,0.313,0.233,0.625,0.233,0.938c0,1.012-0.78,1.949-2.104,1.949
          c-0.937,0-1.794-1.561-2.418-2.73l-12.242-23.938h-10.838v24.873c0,1.17-0.936,1.717-1.949,1.717
          c-0.936,0-1.949-0.547-1.949-1.717V98.448z M258.054,100.554v23.08h11.15c7.407,0,12.554-3.275,12.554-11.617
          c0-8.266-5.146-11.463-12.554-11.463H258.054z"/>
        <path fill="#FFFFFF" d="M310.06,96.812c8.811,0,15.75,4.443,15.75,16.373v24.25c0,11.93-6.939,16.375-15.75,16.375h-13.801
          c-1.092,0-1.872-0.781-1.872-1.639V98.448c0-0.857,0.78-1.637,1.872-1.637H310.06z M298.286,100.554v49.512h11.773
          c7.406,0,11.852-3.977,11.852-12.631v-24.25c0-8.654-4.445-12.631-11.852-12.631H298.286z"/>
        <path fill="#FFFFFF" d="M389.196,152.874c-0.311,0.936-1.324,1.402-2.26,1.402s-1.949-0.467-2.105-1.402l-8.031-29.162
          l-8.031,29.162c-0.234,0.936-1.17,1.402-2.184,1.402s-1.949-0.467-2.184-1.402l-15.438-53.879
          c-0.078-0.234-0.078-0.313-0.078-0.547c0-1.014,1.092-1.637,2.105-1.637c0.779,0,1.559,0.389,1.793,1.17l13.801,49.277
          l7.953-29.551c0.234-1.014,1.17-1.561,2.105-1.561c0.857,0,1.871,0.547,2.184,1.561l8.188,29.551l13.645-49.277
          c0.234-0.781,1.014-1.17,1.793-1.17c1.014,0,2.105,0.623,2.105,1.637c0,0.234,0,0.313-0.078,0.547L389.196,152.874z"/>
        <path fill="#FFFFFF" d="M402.698,152.093c0-0.154,0-0.311,0.078-0.467l16.688-53.879c0.311-0.936,1.168-1.404,2.182-1.404
          c0.938,0,1.873,0.469,2.184,1.404l16.531,53.879c0,0.156,0.078,0.234,0.078,0.467c0,0.936-1.17,1.717-2.262,1.717
          c-0.701,0-1.326-0.313-1.561-1.17l-3.82-12.398h-22.455l-3.742,12.398c-0.313,0.857-0.938,1.17-1.717,1.17
          C403.868,153.81,402.698,153.185,402.698,152.093z M431.704,136.655l-10.059-33.295l-10.291,33.295H431.704z"/>
        <path fill="#FFFFFF" d="M438.12,98.995c-0.078-0.156-0.078-0.313-0.078-0.469c0-1.092,1.17-1.715,2.184-1.715
          c0.779,0,1.402,0.311,1.715,1.17l15.049,49.277l14.971-49.277c0.234-0.859,0.857-1.17,1.559-1.17
          c1.092,0,2.262,0.779,2.262,1.715c0,0.234-0.078,0.313-0.078,0.469l-16.529,53.879c-0.234,0.936-1.248,1.402-2.184,1.402
          c-1.014,0-1.871-0.467-2.184-1.402L438.12,98.995z"/>
        <path fill="#FFFFFF" d="M487.507,123.478h12.396c1.014,0,1.639,0.857,1.639,1.871c0,0.779-0.469,1.715-1.639,1.715h-12.396
          v23.002h25.73c1.014,0,1.637,0.936,1.637,1.949c0,0.859-0.467,1.795-1.637,1.795h-27.758c-0.936,0-1.871-0.547-1.871-1.717
          V98.526c0-1.17,0.936-1.715,1.871-1.715h27.758c1.17,0,1.637,0.936,1.637,1.793c0,1.014-0.623,1.949-1.637,1.949h-25.73V123.478z
          "/>
      </g>
      <g>
        <path fill="#C89685" d="M57.377,152.095V98.45c0-1.09,0.649-1.637,1.949-1.637c1.299,0,1.949,0.547,1.949,1.637v53.645
          c0,1.143-0.65,1.715-1.949,1.715C58.026,153.81,57.377,153.237,57.377,152.095z"/>
      </g>
      <g>
        <path fill="#C89685" d="M83.708,152.095V98.45c0-1.09,1.299-1.637,3.898-1.637c2.597,0,3.898,0.547,3.898,1.637v53.645
          c0,1.143-1.302,1.715-3.898,1.715C85.007,153.81,83.708,153.237,83.708,152.095z"/>
      </g>
      <g>
        <path fill="#C89685" d="M111.475,152.095V98.45c0-1.09,1.948-1.637,5.848-1.637c3.895,0,5.848,0.547,5.848,1.637v53.645
          c0,1.143-1.953,1.715-5.848,1.715C113.423,153.81,111.475,153.237,111.475,152.095z"/>
      </g>
    </g>
    <g>
      <path fill="#7C8287" d="M543.832,155.231c-0.535,0-0.99-0.173-1.364-0.521c-0.375-0.348-0.562-0.734-0.562-1.163v-34.578
        c0-0.481,0.187-0.869,0.562-1.164c0.374-0.293,0.829-0.44,1.364-0.44c0.588,0,1.055,0.147,1.403,0.44
        c0.348,0.295,0.521,0.683,0.521,1.164v4.092c0.643-1.069,1.471-2.072,2.487-3.009c1.016-0.936,2.232-1.697,3.65-2.287
        c1.417-0.588,3.035-0.882,4.854-0.882h2.889c0.481,0,0.883,0.174,1.203,0.521c0.321,0.349,0.481,0.789,0.481,1.323
        c0,0.535-0.16,0.977-0.481,1.324c-0.32,0.349-0.722,0.521-1.203,0.521h-2.889c-1.818,0-3.569,0.469-5.255,1.403
        c-1.685,0.937-3.049,2.274-4.092,4.012c-1.043,1.739-1.564,3.839-1.564,6.298v21.261c0,0.429-0.188,0.815-0.562,1.163
        C544.901,155.059,544.42,155.231,543.832,155.231z"/>
      <path fill="#7C8287" d="M580.817,155.713c-3.263,0-6.137-0.614-8.624-1.846c-2.487-1.229-4.453-2.954-5.897-5.174
        c-1.443-2.22-2.166-4.827-2.166-7.822v-9.548c0-2.62,0.683-5.026,2.046-7.22c1.364-2.193,3.155-3.944,5.376-5.256
        c2.219-1.31,4.665-1.965,7.341-1.965c2.619,0,5.026,0.629,7.22,1.885c2.192,1.258,3.972,2.969,5.336,5.135
        c1.363,2.166,2.045,4.667,2.045,7.501c0,1.979-0.334,3.41-1.002,4.293c-0.67,0.882-1.513,1.417-2.527,1.604
        c-1.017,0.188-2.113,0.28-3.29,0.28h-18.612v3.37c0,3.423,1.229,6.137,3.69,8.143c2.459,2.006,5.536,3.009,9.227,3.009
        c2.192,0,3.877-0.267,5.054-0.803c1.176-0.533,2.086-1.068,2.728-1.604c0.643-0.533,1.23-0.802,1.766-0.802
        c0.373,0,0.694,0.107,0.963,0.321c0.267,0.214,0.481,0.469,0.642,0.762c0.16,0.295,0.24,0.575,0.24,0.843
        c0,0.535-0.469,1.203-1.403,2.005c-0.937,0.803-2.261,1.484-3.972,2.046C585.283,155.432,583.225,155.713,580.817,155.713z
         M568.062,134.292h17.089c1.817,0,3.021-0.187,3.609-0.562c0.588-0.374,0.883-1.149,0.883-2.327c0-1.817-0.441-3.569-1.323-5.255
        c-0.883-1.685-2.141-3.061-3.771-4.131c-1.632-1.069-3.518-1.605-5.655-1.605c-2.034,0-3.865,0.481-5.496,1.444
        c-1.632,0.963-2.929,2.247-3.891,3.852c-0.963,1.604-1.444,3.369-1.444,5.295V134.292z"/>
      <path fill="#7C8287" d="M611.464,155.713c-2.461,0-4.587-0.309-6.379-0.923s-3.196-1.336-4.212-2.166
        c-1.017-0.828-1.523-1.617-1.523-2.367c0-0.267,0.066-0.533,0.2-0.802c0.133-0.267,0.321-0.508,0.562-0.722
        s0.468-0.321,0.682-0.321c0.534,0,1.149,0.309,1.846,0.923c0.694,0.615,1.711,1.243,3.049,1.885
        c1.336,0.643,3.235,0.963,5.696,0.963c3.209,0,5.481-0.614,6.819-1.845c1.336-1.23,2.005-2.674,2.005-4.333
        c0-1.925-0.469-3.436-1.403-4.532c-0.937-1.096-2.181-1.938-3.73-2.527c-1.553-0.588-3.169-1.109-4.854-1.564
        c-1.685-0.454-3.303-1.029-4.854-1.725c-1.552-0.695-2.808-1.686-3.771-2.969c-0.963-1.284-1.444-3.021-1.444-5.215
        c0-1.604,0.428-3.235,1.284-4.894c0.854-1.657,2.178-3.021,3.971-4.092c1.791-1.069,4.132-1.604,7.021-1.604
        c1.711,0,3.342,0.174,4.894,0.521c1.551,0.349,2.834,0.802,3.851,1.363c1.016,0.562,1.524,1.138,1.524,1.726
        c0,0.214-0.08,0.495-0.24,0.842c-0.161,0.349-0.361,0.642-0.602,0.883c-0.241,0.24-0.55,0.361-0.923,0.361
        c-0.375,0-0.91-0.188-1.604-0.562c-0.696-0.374-1.604-0.735-2.729-1.084c-1.123-0.347-2.486-0.521-4.091-0.521
        c-2.086,0-3.759,0.375-5.015,1.124c-1.257,0.749-2.166,1.658-2.728,2.728c-0.562,1.07-0.843,2.113-0.843,3.129
        c0,1.604,0.481,2.861,1.444,3.771c0.963,0.91,2.206,1.618,3.73,2.126c1.524,0.509,3.142,1.003,4.854,1.484s3.33,1.123,4.854,1.926
        c1.524,0.802,2.768,1.912,3.73,3.329c0.963,1.418,1.444,3.357,1.444,5.816c0,2.996-1.098,5.389-3.29,7.181
        C618.496,154.817,615.421,155.713,611.464,155.713z"/>
      <path fill="#7C8287" d="M647.484,155.713c-3.263,0-6.137-0.614-8.624-1.846c-2.487-1.229-4.453-2.954-5.897-5.174
        c-1.443-2.22-2.166-4.827-2.166-7.822v-9.548c0-2.62,0.683-5.026,2.046-7.22c1.364-2.193,3.155-3.944,5.376-5.256
        c2.219-1.31,4.665-1.965,7.341-1.965c2.619,0,5.026,0.629,7.22,1.885c2.192,1.258,3.972,2.969,5.336,5.135
        c1.363,2.166,2.045,4.667,2.045,7.501c0,1.979-0.334,3.41-1.002,4.293c-0.67,0.882-1.513,1.417-2.527,1.604
        c-1.017,0.188-2.114,0.28-3.29,0.28h-18.612v3.37c0,3.423,1.229,6.137,3.69,8.143c2.459,2.006,5.536,3.009,9.227,3.009
        c2.192,0,3.877-0.267,5.054-0.803c1.176-0.533,2.086-1.068,2.728-1.604c0.643-0.533,1.23-0.802,1.766-0.802
        c0.373,0,0.694,0.107,0.963,0.321c0.267,0.214,0.481,0.469,0.642,0.762c0.16,0.295,0.24,0.575,0.24,0.843
        c0,0.535-0.469,1.203-1.403,2.005c-0.937,0.803-2.261,1.484-3.972,2.046C651.95,155.432,649.892,155.713,647.484,155.713z
         M634.729,134.292h17.089c1.817,0,3.021-0.187,3.609-0.562c0.588-0.374,0.883-1.149,0.883-2.327c0-1.817-0.441-3.569-1.323-5.255
        c-0.883-1.685-2.141-3.061-3.771-4.131c-1.632-1.069-3.518-1.605-5.655-1.605c-2.034,0-3.865,0.481-5.496,1.444
        c-1.632,0.963-2.929,2.247-3.891,3.852c-0.963,1.604-1.444,3.369-1.444,5.295V134.292z"/>
      <path fill="#7C8287" d="M676.847,155.713c-3.103,0-5.724-0.869-7.862-2.607c-2.14-1.737-3.209-4.398-3.209-7.982
        c0-2.835,0.788-5.027,2.367-6.579c1.576-1.551,3.771-2.634,6.578-3.249c2.809-0.614,6.058-0.923,9.748-0.923h4.332v-2.086
        c0-1.871-0.335-3.717-1.003-5.535c-0.669-1.818-1.738-3.316-3.209-4.493c-1.472-1.176-3.438-1.765-5.896-1.765
        c-1.713,0-3.116,0.174-4.212,0.521c-1.097,0.348-1.979,0.722-2.647,1.123c-0.67,0.401-1.191,0.602-1.564,0.602
        c-0.535,0-0.963-0.253-1.284-0.763c-0.32-0.507-0.481-0.975-0.481-1.403c0-0.642,0.521-1.244,1.564-1.806s2.367-1.015,3.972-1.363
        c1.604-0.348,3.209-0.521,4.813-0.521c3.477,0,6.218,0.735,8.224,2.206c2.006,1.472,3.449,3.369,4.332,5.696
        c0.883,2.326,1.324,4.827,1.324,7.501v21.261c0,0.429-0.175,0.815-0.521,1.163c-0.349,0.349-0.816,0.521-1.404,0.521
        c-0.535,0-0.99-0.173-1.364-0.521c-0.375-0.348-0.562-0.734-0.562-1.163v-3.932c-1.337,1.552-3.009,2.956-5.014,4.212
        C681.861,155.085,679.521,155.713,676.847,155.713z M677.408,152.183c1.872,0,3.677-0.468,5.416-1.404
        c1.737-0.935,3.169-2.085,4.292-3.449s1.685-2.634,1.685-3.811v-5.938h-3.931c-2.622,0-5.082,0.148-7.382,0.441
        c-2.3,0.295-4.172,0.963-5.615,2.006c-1.444,1.043-2.166,2.688-2.166,4.934c0,2.515,0.748,4.347,2.246,5.496
        C673.45,151.608,675.269,152.183,677.408,152.183z"/>
      <path fill="#7C8287" d="M704.767,155.231c-0.535,0-0.99-0.173-1.364-0.521c-0.375-0.348-0.562-0.734-0.562-1.163v-34.578
        c0-0.481,0.187-0.869,0.562-1.164c0.374-0.293,0.829-0.44,1.364-0.44c0.588,0,1.055,0.147,1.403,0.44
        c0.348,0.295,0.521,0.683,0.521,1.164v4.092c0.643-1.069,1.471-2.072,2.487-3.009c1.016-0.936,2.232-1.697,3.65-2.287
        c1.417-0.588,3.035-0.882,4.854-0.882h2.889c0.481,0,0.883,0.174,1.203,0.521c0.321,0.349,0.481,0.789,0.481,1.323
        c0,0.535-0.16,0.977-0.481,1.324c-0.32,0.349-0.722,0.521-1.203,0.521h-2.889c-1.818,0-3.569,0.469-5.255,1.403
        c-1.685,0.937-3.049,2.274-4.092,4.012c-1.043,1.739-1.564,3.839-1.564,6.298v21.261c0,0.429-0.188,0.815-0.562,1.163
        C705.836,155.059,705.354,155.231,704.767,155.231z"/>
      <path fill="#7C8287" d="M740.227,155.713c-3.423,0-6.245-0.642-8.464-1.926c-2.22-1.283-3.878-3.049-4.974-5.295
        c-1.098-2.246-1.645-4.786-1.645-7.621v-9.146c0-2.78,0.533-5.308,1.604-7.581c1.069-2.273,2.728-4.052,4.974-5.336
        c2.246-1.283,5.081-1.925,8.504-1.925c2.192,0,4.104,0.28,5.736,0.842c1.631,0.562,2.901,1.218,3.812,1.966
        c0.908,0.75,1.363,1.444,1.363,2.086c0,0.269-0.094,0.562-0.28,0.883c-0.188,0.32-0.415,0.575-0.683,0.762
        c-0.268,0.188-0.562,0.281-0.882,0.281c-0.481,0-1.03-0.268-1.645-0.803c-0.616-0.534-1.472-1.056-2.567-1.564
        c-1.098-0.508-2.662-0.762-4.693-0.762c-3.69,0-6.499,1.003-8.424,3.009c-1.926,2.005-2.889,4.721-2.889,8.143v9.146
        c0,3.423,0.963,6.137,2.889,8.143c1.925,2.006,4.76,3.009,8.504,3.009c2.139,0,3.783-0.268,4.934-0.803
        c1.149-0.533,2.032-1.069,2.647-1.604c0.614-0.534,1.189-0.802,1.726-0.802c0.373,0,0.682,0.107,0.922,0.32
        c0.241,0.215,0.454,0.455,0.643,0.723c0.187,0.268,0.28,0.562,0.28,0.882c0,0.59-0.469,1.284-1.404,2.086
        c-0.936,0.803-2.246,1.484-3.931,2.046S742.58,155.713,740.227,155.713z"/>
      <path fill="#7C8287" d="M761.087,155.231c-0.535,0-0.99-0.173-1.364-0.521c-0.375-0.348-0.562-0.734-0.562-1.163V95.462
        c0-0.534,0.187-0.949,0.562-1.244c0.374-0.293,0.829-0.44,1.364-0.44c0.588,0,1.069,0.147,1.444,0.44
        c0.373,0.295,0.562,0.71,0.562,1.244v27.518c0.908-1.551,2.259-2.954,4.051-4.212c1.792-1.256,3.998-1.885,6.619-1.885
        c2.62,0,5.015,0.655,7.181,1.965c2.166,1.312,3.903,3.077,5.215,5.296c1.31,2.22,1.965,4.693,1.965,7.421v21.982
        c0,0.535-0.2,0.95-0.602,1.243c-0.4,0.295-0.87,0.441-1.403,0.441c-0.429,0-0.856-0.146-1.284-0.441
        c-0.429-0.293-0.642-0.708-0.642-1.243v-21.982c0-1.872-0.495-3.637-1.484-5.295c-0.99-1.657-2.286-3.021-3.891-4.092
        c-1.604-1.069-3.397-1.604-5.376-1.604c-1.712,0-3.356,0.441-4.934,1.323c-1.578,0.883-2.876,2.14-3.891,3.771
        c-1.017,1.632-1.524,3.598-1.524,5.896v21.982c0,0.429-0.188,0.815-0.562,1.163C762.156,155.059,761.675,155.231,761.087,155.231z
        "/>
    </g>
  </g>
</svg>
)

const NarativeStudioLogo = () => (
<svg version="1.1" id="Warstwa_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
   width="350px" height="150px" viewBox="40 160 880.394 198.614" enable-background="new 0 0 850.394 258.614"
	 >
<rect y="-0.001" opacity="0" fill="none" width="850.394" height="258.615"/>
<g>
	<g>
		<g>
			<path fill="#FFFFFF" d="M185.079,96.812c1.092,0,1.637,0.857,1.637,1.793s-0.468,1.949-1.637,1.949h-13.411v51.539
				c0,1.17-1.014,1.717-1.949,1.717c-1.014,0-1.95-0.547-1.95-1.717v-51.539h-13.566c-1.014,0-1.638-0.936-1.638-1.871
				s0.624-1.871,1.638-1.871H185.079z"/>
			<path fill="#FFFFFF" d="M221.723,126.05h-23.781v26.043c0,1.17-0.936,1.717-1.949,1.717c-0.936,0-1.949-0.547-1.949-1.717V98.448
				c0-1.17,1.014-1.637,1.949-1.637c1.014,0,1.949,0.467,1.949,1.637v24.016h23.781V98.448c0-1.17,1.014-1.637,1.95-1.637
				c1.013,0,1.949,0.467,1.949,1.637v53.645c0,1.17-0.937,1.717-1.949,1.717c-0.937,0-1.95-0.547-1.95-1.717V126.05z"/>
			<path fill="#FFFFFF" d="M237.938,98.448c0-1.17,1.014-1.637,1.949-1.637c1.014,0,1.949,0.467,1.949,1.637v53.645
				c0,1.17-0.936,1.717-1.949,1.717c-0.936,0-1.949-0.547-1.949-1.717V98.448z"/>
			<path fill="#FFFFFF" d="M254.155,98.448c0-0.857,0.624-1.637,1.715-1.637h13.334c8.811,0,16.452,3.664,16.452,15.127
				c0,9.824-5.614,13.879-12.71,14.893l12.477,24.17c0.155,0.313,0.233,0.625,0.233,0.938c0,1.012-0.78,1.949-2.104,1.949
				c-0.937,0-1.794-1.561-2.418-2.73l-12.242-23.938h-10.838v24.873c0,1.17-0.936,1.717-1.949,1.717
				c-0.936,0-1.949-0.547-1.949-1.717V98.448z M258.054,100.554v23.08h11.15c7.407,0,12.554-3.275,12.554-11.617
				c0-8.266-5.146-11.463-12.554-11.463H258.054z"/>
			<path fill="#FFFFFF" d="M310.06,96.812c8.811,0,15.75,4.443,15.75,16.373v24.25c0,11.93-6.939,16.375-15.75,16.375h-13.801
				c-1.092,0-1.872-0.781-1.872-1.639V98.448c0-0.857,0.78-1.637,1.872-1.637H310.06z M298.286,100.554v49.512h11.773
				c7.406,0,11.852-3.977,11.852-12.631v-24.25c0-8.654-4.445-12.631-11.852-12.631H298.286z"/>
			<path fill="#FFFFFF" d="M389.196,152.874c-0.311,0.936-1.324,1.402-2.26,1.402s-1.949-0.467-2.105-1.402l-8.031-29.162
				l-8.031,29.162c-0.234,0.936-1.17,1.402-2.184,1.402s-1.949-0.467-2.184-1.402l-15.438-53.879
				c-0.078-0.234-0.078-0.313-0.078-0.547c0-1.014,1.092-1.637,2.105-1.637c0.779,0,1.559,0.389,1.793,1.17l13.801,49.277
				l7.953-29.551c0.234-1.014,1.17-1.561,2.105-1.561c0.857,0,1.871,0.547,2.184,1.561l8.188,29.551l13.645-49.277
				c0.234-0.781,1.014-1.17,1.793-1.17c1.014,0,2.105,0.623,2.105,1.637c0,0.234,0,0.313-0.078,0.547L389.196,152.874z"/>
			<path fill="#FFFFFF" d="M402.698,152.093c0-0.154,0-0.311,0.078-0.467l16.688-53.879c0.311-0.936,1.168-1.404,2.182-1.404
				c0.938,0,1.873,0.469,2.184,1.404l16.531,53.879c0,0.156,0.078,0.234,0.078,0.467c0,0.936-1.17,1.717-2.262,1.717
				c-0.701,0-1.326-0.313-1.561-1.17l-3.82-12.398h-22.455l-3.742,12.398c-0.313,0.857-0.938,1.17-1.717,1.17
				C403.868,153.81,402.698,153.185,402.698,152.093z M431.704,136.655l-10.059-33.295l-10.291,33.295H431.704z"/>
			<path fill="#FFFFFF" d="M438.12,98.995c-0.078-0.156-0.078-0.313-0.078-0.469c0-1.092,1.17-1.715,2.184-1.715
				c0.779,0,1.402,0.311,1.715,1.17l15.049,49.277l14.971-49.277c0.234-0.859,0.857-1.17,1.559-1.17
				c1.092,0,2.262,0.779,2.262,1.715c0,0.234-0.078,0.313-0.078,0.469l-16.529,53.879c-0.234,0.936-1.248,1.402-2.184,1.402
				c-1.014,0-1.871-0.467-2.184-1.402L438.12,98.995z"/>
			<path fill="#FFFFFF" d="M487.507,123.478h12.396c1.014,0,1.639,0.857,1.639,1.871c0,0.779-0.469,1.715-1.639,1.715h-12.396
				v23.002h25.73c1.014,0,1.637,0.936,1.637,1.949c0,0.859-0.467,1.795-1.637,1.795h-27.758c-0.936,0-1.871-0.547-1.871-1.717
				V98.526c0-1.17,0.936-1.715,1.871-1.715h27.758c1.17,0,1.637,0.936,1.637,1.793c0,1.014-0.623,1.949-1.637,1.949h-25.73V123.478z
				"/>
		</g>
		<g>
			<path fill="#C89685" d="M57.377,152.095V98.45c0-1.09,0.649-1.637,1.949-1.637c1.299,0,1.949,0.547,1.949,1.637v53.645
				c0,1.143-0.65,1.715-1.949,1.715C58.026,153.81,57.377,153.237,57.377,152.095z"/>
		</g>
		<g>
			<path fill="#C89685" d="M83.708,152.095V98.45c0-1.09,1.299-1.637,3.898-1.637c2.597,0,3.898,0.547,3.898,1.637v53.645
				c0,1.143-1.302,1.715-3.898,1.715C85.007,153.81,83.708,153.237,83.708,152.095z"/>
		</g>
		<g>
			<path fill="#C89685" d="M111.475,152.095V98.45c0-1.09,1.948-1.637,5.848-1.637c3.895,0,5.848,0.547,5.848,1.637v53.645
				c0,1.143-1.953,1.715-5.848,1.715C113.423,153.81,111.475,153.237,111.475,152.095z"/>
		</g>
	</g>
	<g>
		<path fill="#7C8287" d="M551.694,155.713c-2.461,0-4.587-0.309-6.379-0.923s-3.196-1.336-4.212-2.166
			c-1.017-0.828-1.523-1.617-1.523-2.367c0-0.267,0.066-0.533,0.2-0.802c0.133-0.267,0.321-0.508,0.562-0.722
			s0.468-0.321,0.682-0.321c0.534,0,1.149,0.309,1.846,0.923c0.694,0.615,1.711,1.243,3.049,1.885
			c1.336,0.643,3.235,0.963,5.696,0.963c3.209,0,5.481-0.614,6.819-1.845c1.336-1.23,2.005-2.674,2.005-4.333
			c0-1.925-0.469-3.436-1.403-4.532c-0.937-1.096-2.181-1.938-3.73-2.527c-1.553-0.588-3.169-1.109-4.854-1.564
			c-1.685-0.454-3.303-1.029-4.854-1.725c-1.552-0.695-2.808-1.686-3.771-2.969c-0.963-1.284-1.444-3.021-1.444-5.215
			c0-1.604,0.428-3.235,1.284-4.894c0.854-1.657,2.178-3.021,3.971-4.092c1.791-1.069,4.132-1.604,7.021-1.604
			c1.711,0,3.342,0.174,4.894,0.521c1.551,0.349,2.834,0.802,3.851,1.363c1.016,0.562,1.524,1.138,1.524,1.726
			c0,0.214-0.08,0.495-0.24,0.842c-0.161,0.349-0.361,0.642-0.602,0.883c-0.241,0.24-0.55,0.361-0.923,0.361
			c-0.375,0-0.91-0.188-1.604-0.562c-0.696-0.374-1.604-0.735-2.729-1.084c-1.123-0.347-2.486-0.521-4.091-0.521
			c-2.086,0-3.759,0.375-5.015,1.124c-1.257,0.749-2.166,1.658-2.728,2.728c-0.562,1.07-0.843,2.113-0.843,3.129
			c0,1.604,0.481,2.861,1.444,3.771c0.963,0.91,2.206,1.618,3.73,2.126c1.524,0.509,3.142,1.003,4.854,1.484s3.33,1.123,4.854,1.926
			c1.524,0.802,2.768,1.912,3.73,3.329c0.963,1.418,1.444,3.357,1.444,5.816c0,2.996-1.098,5.389-3.29,7.181
			C558.727,154.817,555.651,155.713,551.694,155.713z"/>
		<path fill="#7C8287" d="M584.426,155.231c-3.959,0-6.979-0.909-9.065-2.728c-2.086-1.817-3.129-4.706-3.129-8.665v-43.162
			c0-0.534,0.213-0.949,0.642-1.244c0.428-0.293,0.854-0.44,1.283-0.44c0.534,0,1.003,0.147,1.404,0.44
			c0.401,0.295,0.602,0.71,0.602,1.244v16.688h10.671c0.427,0,0.788,0.16,1.083,0.481c0.293,0.32,0.44,0.749,0.44,1.283
			c0,0.429-0.147,0.816-0.44,1.163c-0.295,0.349-0.656,0.521-1.083,0.521h-10.671v23.025c0,2.782,0.628,4.762,1.886,5.938
			c1.256,1.177,3.382,1.765,6.378,1.765h2.006c0.588,0,1.043,0.174,1.363,0.521c0.321,0.349,0.481,0.79,0.481,1.323
			c0,0.481-0.16,0.91-0.481,1.284c-0.32,0.375-0.775,0.562-1.363,0.562H584.426z"/>
		<path fill="#7C8287" d="M609.537,155.713c-2.676,0-5.135-0.682-7.382-2.046c-2.246-1.364-4.038-3.169-5.375-5.415
			c-1.337-2.247-2.006-4.653-2.006-7.221v-21.982c0-0.428,0.201-0.815,0.603-1.163c0.4-0.348,0.868-0.521,1.403-0.521
			c0.534,0,0.989,0.174,1.364,0.521c0.373,0.348,0.562,0.735,0.562,1.163v21.982c0,1.873,0.481,3.638,1.444,5.295
			c0.962,1.658,2.259,3.022,3.891,4.092c1.631,1.07,3.462,1.604,5.496,1.604c2.031,0,3.851-0.521,5.455-1.564
			s2.889-2.407,3.851-4.092c0.963-1.685,1.444-3.462,1.444-5.335v-22.063c0-0.428,0.2-0.803,0.602-1.123
			c0.401-0.321,0.869-0.481,1.404-0.481c0.588,0,1.056,0.16,1.404,0.481c0.347,0.32,0.521,0.695,0.521,1.123v22.063
			c0,2.621-0.67,5.055-2.006,7.301c-1.338,2.246-3.116,4.039-5.335,5.375C614.657,155.045,612.211,155.713,609.537,155.713z"/>
		<path fill="#7C8287" d="M647.163,155.713c-2.514,0-4.867-0.694-7.06-2.086c-2.193-1.391-3.945-3.222-5.255-5.496
			c-1.312-2.272-1.966-4.693-1.966-7.26v-9.307c0-2.728,0.654-5.201,1.966-7.421c1.31-2.219,3.062-3.984,5.255-5.296
			c2.192-1.31,4.6-1.965,7.221-1.965c2.674,0,4.906,0.629,6.699,1.885c1.791,1.258,3.114,2.661,3.971,4.212V95.462
			c0-0.534,0.201-0.949,0.602-1.244c0.401-0.293,0.869-0.44,1.404-0.44c0.588,0,1.056,0.147,1.404,0.44
			c0.347,0.295,0.521,0.71,0.521,1.244v58.085c0,0.429-0.175,0.815-0.521,1.163c-0.349,0.349-0.816,0.521-1.404,0.521
			c-0.481,0-0.923-0.173-1.324-0.521c-0.4-0.348-0.602-0.734-0.602-1.163v-3.932c-0.802,1.659-2.206,3.089-4.212,4.292
			C651.856,155.111,649.623,155.713,647.163,155.713z M647.484,152.022c2.032,0,3.837-0.521,5.415-1.564
			c1.577-1.043,2.821-2.232,3.731-3.57c0.908-1.336,1.363-2.434,1.363-3.289v-12.034c0-2.299-0.509-4.265-1.524-5.896
			c-1.017-1.632-2.313-2.889-3.891-3.771c-1.578-0.882-3.249-1.323-5.015-1.323c-1.925,0-3.704,0.535-5.335,1.604
			c-1.632,1.07-2.942,2.435-3.931,4.092c-0.991,1.658-1.484,3.423-1.484,5.295v9.307c0,1.872,0.493,3.664,1.484,5.375
			c0.988,1.712,2.286,3.103,3.891,4.172C643.794,151.488,645.559,152.022,647.484,152.022z"/>
		<path fill="#7C8287" d="M674.441,105.41c-0.803,0-1.512-0.294-2.126-0.883c-0.616-0.588-0.923-1.283-0.923-2.086
			c0-0.802,0.307-1.471,0.923-2.006c0.614-0.534,1.323-0.802,2.126-0.802c0.854,0,1.564,0.268,2.126,0.802
			c0.562,0.535,0.842,1.204,0.842,2.006c0,0.803-0.28,1.498-0.842,2.086C676.006,105.116,675.296,105.41,674.441,105.41z
			 M674.441,155.231c-0.535,0-0.99-0.173-1.364-0.521c-0.375-0.348-0.562-0.734-0.562-1.163v-34.578
			c0-0.481,0.187-0.869,0.562-1.164c0.374-0.293,0.829-0.44,1.364-0.44c0.588,0,1.069,0.147,1.443,0.44
			c0.374,0.295,0.562,0.683,0.562,1.164v34.578c0,0.429-0.188,0.815-0.562,1.163C675.511,155.059,675.029,155.231,674.441,155.231z"
			/>
		<path fill="#7C8287" d="M700.193,155.713c-2.567,0-4.974-0.694-7.221-2.086c-2.246-1.391-4.051-3.209-5.415-5.455
			c-1.363-2.247-2.046-4.68-2.046-7.301v-9.307c0-2.62,0.668-5.055,2.006-7.301c1.336-2.246,3.129-4.038,5.375-5.375
			c2.247-1.337,4.68-2.006,7.301-2.006c2.674,0,5.121,0.655,7.341,1.965c2.219,1.312,4.012,3.077,5.376,5.296
			c1.363,2.22,2.045,4.693,2.045,7.421v9.307c0,2.566-0.682,4.987-2.045,7.26c-1.364,2.274-3.157,4.105-5.376,5.496
			C705.314,155.019,702.867,155.713,700.193,155.713z M700.193,152.022c2.032,0,3.852-0.534,5.456-1.604
			c1.604-1.069,2.9-2.46,3.891-4.172c0.989-1.711,1.484-3.503,1.484-5.375v-9.307c0-1.872-0.481-3.637-1.444-5.295
			c-0.963-1.657-2.26-3.021-3.891-4.092c-1.633-1.069-3.464-1.604-5.496-1.604c-2.033,0-3.851,0.535-5.455,1.604
			c-1.604,1.07-2.889,2.435-3.852,4.092c-0.962,1.658-1.443,3.423-1.443,5.295v9.307c0,1.872,0.481,3.664,1.443,5.375
			c0.963,1.712,2.26,3.103,3.892,4.172C696.409,151.488,698.214,152.022,700.193,152.022z"/>
	</g>
</g>
</svg>
)

const InternalLinkIcon = () => (
  <svg
    width="18"
    height="18"
    viewBox="0 0 18 18"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M11.25 3.75L15.75 8.25L14.685 9.315L12 6.6225L12 15L3 15L3 13.5L10.5 13.5L10.5 6.6225L7.815 9.315L6.75 8.25L11.25 3.75Z"
      fill="#E9DAAC"
    />
  </svg>
)
